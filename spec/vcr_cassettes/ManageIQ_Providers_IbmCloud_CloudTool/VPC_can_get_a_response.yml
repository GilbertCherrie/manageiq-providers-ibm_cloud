---
http_interactions:
- request:
    method: post
    uri: https://iam.cloud.ibm.com/identity/token
    body:
      encoding: UTF-8
      string: grant_type=urn%3Aibm%3Aparams%3Aoauth%3Agrant-type%3Aapikey&apikey=IBM_CLOUD_VPC_API_KEY&response_type=cloud_iam
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
      Accept:
      - application/json
      Connection:
      - close
      User-Agent:
      - http.rb/4.1.1
  response:
    status:
      code: 200
      message: OK
    headers:
      Transaction-Id:
      - 1570e2255eaa42e78793fe2dab2e7636
      Cache-Control:
      - no-cache, no-store
      Expires:
      - '0'
      Pragma:
      - no-cache
      Content-Type:
      - application/json
      Content-Language:
      - en-US
      Content-Length:
      - '1524'
      X-Envoy-Upstream-Service-Time:
      - '716'
      Server:
      - istio-envoy
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Date:
      - Wed, 21 Apr 2021 19:42:33 GMT
      Connection:
      - close
      Set-Cookie:
      - sessioncookie="eaad2a5d25cb7fee"; Path=/; HttpOnly
    body:
      encoding: ASCII-8BIT
      string: '{"access_token":"eyJraWQiOiIyMDIxMDQyMDE4MzYiLCJhbGciOiJSUzI1NiJ9.eyJpYW1faWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwiaWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwicmVhbG1pZCI6IklCTWlkIiwianRpIjoiNmZkYTE5MDQtOTM3My00MDc1LWFjOGQtNGYzZDRhMDRjNTJlIiwiaWRlbnRpZmllciI6IjI3MDAwMVhOTkYiLCJnaXZlbl9uYW1lIjoiSmFyZWQiLCJmYW1pbHlfbmFtZSI6Ik1vb3JlIiwibmFtZSI6IkphcmVkIE1vb3JlIiwiZW1haWwiOiJqYXJlZG1AY2EuaWJtLmNvbSIsInN1YiI6ImphcmVkbUBjYS5pYm0uY29tIiwiYXV0aG4iOnsic3ViIjoiamFyZWRtQGNhLmlibS5jb20iLCJpYW1faWQiOiJpYW0tMjcwMDAxWE5ORiIsIm5hbWUiOiJKYXJlZCBNb29yZSIsImdpdmVuX25hbWUiOiJKYXJlZCIsImZhbWlseV9uYW1lIjoiTW9vcmUiLCJlbWFpbCI6ImphcmVkbUBjYS5pYm0uY29tIn0sImFjY291bnQiOnsidmFsaWQiOnRydWUsImJzcyI6ImM1NmM5YTI2OGQyM2UxYjMzOWFjMTQ3NzQzNTgxMzNjIiwiaW1zX3VzZXJfaWQiOiI3MjI2NTkxIiwiZnJvemVuIjp0cnVlLCJpbXMiOiIxMTYwNDQ3In0sImlhdCI6MTYxOTAzNDE0OSwiZXhwIjoxNjE5MDM3NzQ5LCJpc3MiOiJodHRwczovL2lhbS5jbG91ZC5pYm0uY29tL2lkZW50aXR5IiwiZ3JhbnRfdHlwZSI6InVybjppYm06cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6YXBpa2V5Iiwic2NvcGUiOiJpYm0gb3BlbmlkIiwiY2xpZW50X2lkIjoiZGVmYXVsdCIsImFjciI6MSwiYW1yIjpbInB3ZCJdfQ.S9gnpKytVpCCW_ACaH7HNAvqYE6QdrhHTXJBOd4rsmldz98zwwUWJ62499zJ-d2MSgJzwuI7N87k68dEQPXba4EC2Oa-oiEKTNKudIRHGivlKSOFu8hN4Hg86MSe66rtz0tCY1MqAxDlbepRJq4ZwqQOOE8mIafonUcIiBD5I-kBUK6nayXJv14aRZWwcaxFVdf75NoztaA-36RJCJEc40RJe_ufmBVNrJA2yUPJPmJ9WC0cUJxSUBbGNgoiNH1C4aw_vd5P8HdEl1B1PdBN-LOJO1qtpFZdKEa1IuJaCu6ClWpO9UsSKEbjKAufYECO1W4GbZQ8tP5TJvs7VfIJAg","refresh_token":"REFRESH_TOKEN","ims_user_id":"22222","token_type":"Bearer","expires_in":3600,"expiration":4102462800,"scope":"ibm
        openid"}'
    http_version:
  recorded_at: Wed, 21 Apr 2021 19:42:32 GMT
- request:
    method: get
    uri: https://us-east.iaas.cloud.ibm.com/v1/images?generation=2&limit=1&version=2021-01-01
    body:
      encoding: UTF-8
      string: ''
    headers:
      User-Agent:
      - ibm_vpc-ruby-sdk-0.1.0 x86_64-apple-darwin20.3.0 ruby-2.6.7
      X-Ibmcloud-Sdk-Analytics:
      - service_name=vpc;service_version=V1;operation_id=list_images
      Accept:
      - application/json
      Authorization: Bearer xxxxxx
      Connection:
      - close
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 21 Apr 2021 19:42:34 GMT
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '1316'
      Connection:
      - close
      Set-Cookie:
      - __cfduid=d6a51045b32fe4c727ef9066a9539299e1619034153; expires=Fri, 21-May-21
        19:42:33 GMT; path=/; domain=.iaas.cloud.ibm.com; HttpOnly; SameSite=Lax;
        Secure
      Cf-Ray:
      - 643918a10a223ff2-YYZ
      Cache-Control:
      - max-age=0, no-cache, no-store, must-revalidate
      Expires:
      - "-1"
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Cf-Cache-Status:
      - DYNAMIC
      Cf-Request-Id:
      - '09978db8a400003ff2ed818000000001'
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Pragma:
      - no-cache
      Transaction-Id:
      - 42b958d9699983c5f8beb5e7278481a0
      X-Content-Type-Options:
      - nosniff
      X-Request-Id:
      - 42b958d9699983c5f8beb5e7278481a0
      X-Xss-Protection:
      - 1; mode=block
      Server:
      - cloudflare
    body:
      encoding: UTF-8
      string: '{"first":{"href":"https://us-east.iaas.cloud.ibm.com/v1/images?limit=1"},"limit":1,"next":{"href":"https://us-east.iaas.cloud.ibm.com/v1/images?start=eyJDcmVhdGVkQXQiOiIyMDIxLTA0LTE2VDIxOjQyOjU4WiIsIklEIjoicjAxNC1lN2FmZDdjYy0wMDVjLTRkYTUtYmNhOC0wZDMyZTRkN2RhNDEifQ\u0026limit=1"},"images":[{"id":"r014-e7afd7cc-005c-4da5-bca8-0d32e4d7da41","crn":"crn:v1:bluemix:public:is:us-east:a/811f8abfbd32425597dc7ba40da98fa6::image:r014-e7afd7cc-005c-4da5-bca8-0d32e4d7da41","href":"https://us-east.iaas.cloud.ibm.com/v1/images/r014-e7afd7cc-005c-4da5-bca8-0d32e4d7da41","name":"ibm-redhat-8-3-minimal-amd64-2","minimum_provisioned_size":100,"resource_group":{"id":"","href":"https://resource-controller.cloud.ibm.com/v1/resource_groups/"},"created_at":"2021-04-16T21:42:58Z","file":{"checksums":{"sha256":"ebd751dba71290013bf5624187ba616a542965c17920b6985868e44f8ed088e7"},"size":1},"operating_system":{"href":"https://us-east.iaas.cloud.ibm.com/v1/operating_systems/red-8-amd64","name":"red-8-amd64","architecture":"amd64","display_name":"Red
        Hat Enterprise Linux 8.x - Minimal Install (amd64)","family":"Red Hat Enterprise
        Linux","vendor":"Red Hat","version":"8.x - Minimal Install","dedicated_host_only":false},"status":"available","visibility":"public","encryption":"none","status_reasons":[],"type":"provider_managed"}]}'
    http_version:
  recorded_at: Wed, 21 Apr 2021 19:42:34 GMT
recorded_with: VCR 5.1.0
