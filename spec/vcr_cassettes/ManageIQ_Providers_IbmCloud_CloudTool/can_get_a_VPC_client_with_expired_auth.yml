---
http_interactions:
- request:
    method: post
    uri: https://iam.cloud.ibm.com/identity/token
    body:
      encoding: UTF-8
      string: grant_type=urn%3Aibm%3Aparams%3Aoauth%3Agrant-type%3Aapikey&apikey=IBM_CLOUD_VPC_API_KEY&response_type=cloud_iam
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
      Accept:
      - application/json
      Connection:
      - close
      User-Agent:
      - http.rb/4.1.1
  response:
    status:
      code: 200
      message: OK
    headers:
      Transaction-Id:
      - 84288ca44ca846b7b08f394ac1e7ba34
      Cache-Control:
      - no-cache, no-store
      Expires:
      - '0'
      Pragma:
      - no-cache
      Content-Type:
      - application/json
      Content-Language:
      - en-US
      Content-Length:
      - '1524'
      X-Envoy-Upstream-Service-Time:
      - '509'
      Server:
      - istio-envoy
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Date:
      - Wed, 21 Apr 2021 19:42:38 GMT
      Connection:
      - close
      Set-Cookie:
      - sessioncookie="4e9d68b1c153f501"; Path=/; HttpOnly
    body:
      encoding: ASCII-8BIT
      string: '{"access_token":"eyJraWQiOiIyMDIxMDQyMDE4MzYiLCJhbGciOiJSUzI1NiJ9.eyJpYW1faWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwiaWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwicmVhbG1pZCI6IklCTWlkIiwianRpIjoiOTY2ZTQ0ZmItMzY0NS00OWNlLWE5ODEtZWE2ZGFhYTdlZDMzIiwiaWRlbnRpZmllciI6IjI3MDAwMVhOTkYiLCJnaXZlbl9uYW1lIjoiSmFyZWQiLCJmYW1pbHlfbmFtZSI6Ik1vb3JlIiwibmFtZSI6IkphcmVkIE1vb3JlIiwiZW1haWwiOiJqYXJlZG1AY2EuaWJtLmNvbSIsInN1YiI6ImphcmVkbUBjYS5pYm0uY29tIiwiYXV0aG4iOnsic3ViIjoiamFyZWRtQGNhLmlibS5jb20iLCJpYW1faWQiOiJpYW0tMjcwMDAxWE5ORiIsIm5hbWUiOiJKYXJlZCBNb29yZSIsImdpdmVuX25hbWUiOiJKYXJlZCIsImZhbWlseV9uYW1lIjoiTW9vcmUiLCJlbWFpbCI6ImphcmVkbUBjYS5pYm0uY29tIn0sImFjY291bnQiOnsidmFsaWQiOnRydWUsImJzcyI6ImM1NmM5YTI2OGQyM2UxYjMzOWFjMTQ3NzQzNTgxMzNjIiwiaW1zX3VzZXJfaWQiOiI3MjI2NTkxIiwiZnJvemVuIjp0cnVlLCJpbXMiOiIxMTYwNDQ3In0sImlhdCI6MTYxOTAzNDE1NSwiZXhwIjoxNjE5MDM3NzU1LCJpc3MiOiJodHRwczovL2lhbS5jbG91ZC5pYm0uY29tL2lkZW50aXR5IiwiZ3JhbnRfdHlwZSI6InVybjppYm06cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6YXBpa2V5Iiwic2NvcGUiOiJpYm0gb3BlbmlkIiwiY2xpZW50X2lkIjoiZGVmYXVsdCIsImFjciI6MSwiYW1yIjpbInB3ZCJdfQ.WcJ7PGyNsU44kORypTT4vuy5a5DxpyxFTXBgihFU_KcDJhBpVZhu2dlz7NAjPx8aZrac1I18-tJ7Js_cYeYOqugjYP_Eq3XatLzdbvjMvhc6XtiAuCt1HB_8y_Oz6nqK2vxFgWjhE2Yj63DSRDGI0oix6cLIuHoUnU13aJ28_0wuj5NTxcqgvNHGLgByZqoK7QtwjYospfBEv1DaM5uWpiQLURAAf2bZM_4vemaRqE5TBc1Q2hxDqJmTI7a4zqizaxKB-MSiVdiaK1FMkvznIzq_cX4PedCrzo0aLYBDKLlDKS6nZl7Zd1xn1SinYkpCd9GEpW2yISWC3Q2xZWvJPg","refresh_token":"REFRESH_TOKEN","ims_user_id":"22222","token_type":"Bearer","expires_in":3600,"expiration":4102462800,"scope":"ibm
        openid"}'
    http_version:
  recorded_at: Wed, 21 Apr 2021 19:42:38 GMT
- request:
    method: post
    uri: https://iam.cloud.ibm.com/identity/token
    body:
      encoding: UTF-8
      string: grant_type=urn%3Aibm%3Aparams%3Aoauth%3Agrant-type%3Aapikey&apikey=IBM_CLOUD_VPC_API_KEY&response_type=cloud_iam
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
      Accept:
      - application/json
      Connection:
      - close
      User-Agent:
      - http.rb/4.1.1
  response:
    status:
      code: 200
      message: OK
    headers:
      Transaction-Id:
      - 62ff215e29e044c68419acdbd6b658f1
      Cache-Control:
      - no-cache, no-store
      Expires:
      - '0'
      Pragma:
      - no-cache
      Content-Type:
      - application/json
      Content-Language:
      - en-US
      Content-Length:
      - '1524'
      X-Envoy-Upstream-Service-Time:
      - '39'
      Server:
      - istio-envoy
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Date:
      - Wed, 21 Apr 2021 19:42:38 GMT
      Connection:
      - close
      Set-Cookie:
      - sessioncookie="a5bd2158b5dfb697"; Path=/; HttpOnly
    body:
      encoding: ASCII-8BIT
      string: '{"access_token":"eyJraWQiOiIyMDIxMDQyMDE4MzYiLCJhbGciOiJSUzI1NiJ9.eyJpYW1faWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwiaWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwicmVhbG1pZCI6IklCTWlkIiwianRpIjoiMGE4ZTAyYWMtMDkyZi00MzIxLThlZWUtZWZlNWQ1NTgzNGYzIiwiaWRlbnRpZmllciI6IjI3MDAwMVhOTkYiLCJnaXZlbl9uYW1lIjoiSmFyZWQiLCJmYW1pbHlfbmFtZSI6Ik1vb3JlIiwibmFtZSI6IkphcmVkIE1vb3JlIiwiZW1haWwiOiJqYXJlZG1AY2EuaWJtLmNvbSIsInN1YiI6ImphcmVkbUBjYS5pYm0uY29tIiwiYXV0aG4iOnsic3ViIjoiamFyZWRtQGNhLmlibS5jb20iLCJpYW1faWQiOiJpYW0tMjcwMDAxWE5ORiIsIm5hbWUiOiJKYXJlZCBNb29yZSIsImdpdmVuX25hbWUiOiJKYXJlZCIsImZhbWlseV9uYW1lIjoiTW9vcmUiLCJlbWFpbCI6ImphcmVkbUBjYS5pYm0uY29tIn0sImFjY291bnQiOnsidmFsaWQiOnRydWUsImJzcyI6ImM1NmM5YTI2OGQyM2UxYjMzOWFjMTQ3NzQzNTgxMzNjIiwiaW1zX3VzZXJfaWQiOiI3MjI2NTkxIiwiZnJvemVuIjp0cnVlLCJpbXMiOiIxMTYwNDQ3In0sImlhdCI6MTYxOTAzNDE1NSwiZXhwIjoxNjE5MDM3NzU1LCJpc3MiOiJodHRwczovL2lhbS5jbG91ZC5pYm0uY29tL2lkZW50aXR5IiwiZ3JhbnRfdHlwZSI6InVybjppYm06cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6YXBpa2V5Iiwic2NvcGUiOiJpYm0gb3BlbmlkIiwiY2xpZW50X2lkIjoiZGVmYXVsdCIsImFjciI6MSwiYW1yIjpbInB3ZCJdfQ.CFR5No6U_70vd3o7I1r2WHSK1oodrkqvDSnLWHLbYxscyBCQVmz8YFUuk3dv9Py9GS3bty_UgibX08QcG0vLFxdGPTBRealEGTG7x2K1hPObqhJHM-6_Offwioi-ah9A3Hz-bzJjEPr9wk9OHe79HhPp9F5AMEVPbuVOwoTEa0hlaD0kz2rAVPsDxmaLvWKByA6TLpLfhs_49BtDqKNw2LqePH236URrACRdKUVcBroXmXXwgK4HwXkFNIfgidakixwOE_f6mEuIw8qSDekQUdRQs1OGizUOHPGLl1wyHkRiOgCT2XjTBFPJvcWWK6ZE69IRJ7hfBhpiipoDIsr9Tg","refresh_token":"REFRESH_TOKEN","ims_user_id":"22222","token_type":"Bearer","expires_in":3600,"expiration":4102462800,"scope":"ibm
        openid"}'
    http_version:
  recorded_at: Wed, 21 Apr 2021 19:42:38 GMT
- request:
    method: get
    uri: https://us-east.iaas.cloud.ibm.com/v1/subnets?generation=2&version=2021-01-01
    body:
      encoding: UTF-8
      string: ''
    headers:
      User-Agent:
      - ibm_vpc-ruby-sdk-0.1.0 x86_64-apple-darwin20.3.0 ruby-2.6.7
      X-Ibmcloud-Sdk-Analytics:
      - service_name=vpc;service_version=V1;operation_id=list_subnets
      Accept:
      - application/json
      Authorization: Bearer xxxxxx
      Connection:
      - close
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 21 Apr 2021 19:42:40 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Connection:
      - close
      Set-Cookie:
      - __cfduid=d095073d2156e3c9f13cc2a9aa84cc3bb1619034158; expires=Fri, 21-May-21
        19:42:38 GMT; path=/; domain=.iaas.cloud.ibm.com; HttpOnly; SameSite=Lax;
        Secure
      Cf-Ray:
      - 643918c4ff3d3ffd-YYZ
      Cache-Control:
      - max-age=0, no-cache, no-store, must-revalidate
      Expires:
      - "-1"
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Cf-Cache-Status:
      - DYNAMIC
      Cf-Request-Id:
      - '09978dcf1e00003ffd32ac7000000001'
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Pragma:
      - no-cache
      X-Content-Type-Options:
      - nosniff
      X-Request-Id:
      - a9469946-ce4a-4e44-88de-5866353f8f09
      X-Trace-Id:
      - 6a3fa41c0b10e99e
      X-Xss-Protection:
      - 1; mode=block
      Server:
      - cloudflare
    body:
      encoding: UTF-8
      string: '{"limit":50,"first":{"href":"https://us-east.iaas.cloud.ibm.com/v1/subnets?limit=50"},"total_count":4,"subnets":[{"id":"0757-ef523a2f-5356-42ff-8a78-9325509465b9","crn":"crn:v1:bluemix:public:is:us-east-1:a/c56c9a268d23e1b339ac14774358133c::subnet:0757-ef523a2f-5356-42ff-8a78-9325509465b9","href":"https://us-east.iaas.cloud.ibm.com/v1/subnets/0757-ef523a2f-5356-42ff-8a78-9325509465b9","name":"b-subneet-washington-dc-1","resource_type":"subnet","available_ipv4_address_count":250,"ipv4_cidr_block":"127.0.0.0/24","ip_version":"ipv4","zone":{"name":"us-east-1","href":"https://us-east.iaas.cloud.ibm.com/v1/regions/us-east/zones/us-east-1"},"vpc":{"id":"r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::vpc:r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","name":"b-vpc-washington-dc","resource_type":"vpc"},"status":"available","total_ipv4_address_count":256,"created_at":"2020-10-23T20:08:07Z","network_acl":{"id":"r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::network-acl:r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","href":"https://us-east.iaas.cloud.ibm.com/v1/network_acls/r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","name":"moving-perfected-sprang-isolation"},"public_gateway":{"id":"r014-8ce8eccc-2f61-4ddc-9c4c-5ad693974f34","crn":"crn:v1:bluemix:public:is:us-east-1:a/c56c9a268d23e1b339ac14774358133c::public-gateway:r014-8ce8eccc-2f61-4ddc-9c4c-5ad693974f34","href":"https://us-east.iaas.cloud.ibm.com/v1/public_gateways/r014-8ce8eccc-2f61-4ddc-9c4c-5ad693974f34","name":"pgw-78648670-156b-11eb-b106-4d01d2f29e8a","resource_type":"public_gateway"},"resource_group":{"id":"345c433098294722ba52d9039133e8cf","href":"https://resource-controller.cloud.ibm.com/v2/resource_groups/345c433098294722ba52d9039133e8cf","name":"default"},"routing_table":{"id":"r014-05bca06d-0ada-4941-8cd6-d641610f628d","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3/routing_tables/r014-05bca06d-0ada-4941-8cd6-d641610f628d","name":"refute-dotted-lethargic-snowbound-online-matron","resource_type":"routing_table"}},{"id":"0767-14d27cd3-66c4-429c-8ab7-6b0e948d345a","crn":"crn:v1:bluemix:public:is:us-east-2:a/c56c9a268d23e1b339ac14774358133c::subnet:0767-14d27cd3-66c4-429c-8ab7-6b0e948d345a","href":"https://us-east.iaas.cloud.ibm.com/v1/subnets/0767-14d27cd3-66c4-429c-8ab7-6b0e948d345a","name":"b-subnet-washington-dc-2","resource_type":"subnet","available_ipv4_address_count":250,"ipv4_cidr_block":"127.0.0.0/24","ip_version":"ipv4","zone":{"name":"us-east-2","href":"https://us-east.iaas.cloud.ibm.com/v1/regions/us-east/zones/us-east-2"},"vpc":{"id":"r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::vpc:r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","name":"b-vpc-washington-dc","resource_type":"vpc"},"status":"available","total_ipv4_address_count":256,"created_at":"2020-10-23T20:06:47Z","network_acl":{"id":"r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::network-acl:r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","href":"https://us-east.iaas.cloud.ibm.com/v1/network_acls/r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","name":"moving-perfected-sprang-isolation"},"public_gateway":{"id":"r014-5edbf6a1-7251-4925-9b9c-5905ca6b923a","crn":"crn:v1:bluemix:public:is:us-east-2:a/c56c9a268d23e1b339ac14774358133c::public-gateway:r014-5edbf6a1-7251-4925-9b9c-5905ca6b923a","href":"https://us-east.iaas.cloud.ibm.com/v1/public_gateways/r014-5edbf6a1-7251-4925-9b9c-5905ca6b923a","name":"pgw-48cc88e0-156b-11eb-b5c7-eb70e3cf761d","resource_type":"public_gateway"},"resource_group":{"id":"345c433098294722ba52d9039133e8cf","href":"https://resource-controller.cloud.ibm.com/v2/resource_groups/345c433098294722ba52d9039133e8cf","name":"default"},"routing_table":{"id":"r014-05bca06d-0ada-4941-8cd6-d641610f628d","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3/routing_tables/r014-05bca06d-0ada-4941-8cd6-d641610f628d","name":"refute-dotted-lethargic-snowbound-online-matron","resource_type":"routing_table"}},{"id":"0777-da420f1d-7d0d-456e-9ecc-6f94b6b9b2d8","crn":"crn:v1:bluemix:public:is:us-east-3:a/c56c9a268d23e1b339ac14774358133c::subnet:0777-da420f1d-7d0d-456e-9ecc-6f94b6b9b2d8","href":"https://us-east.iaas.cloud.ibm.com/v1/subnets/0777-da420f1d-7d0d-456e-9ecc-6f94b6b9b2d8","name":"b-subnet-washington-dc-3","resource_type":"subnet","available_ipv4_address_count":250,"ipv4_cidr_block":"127.0.0.0/24","ip_version":"ipv4","zone":{"name":"us-east-3","href":"https://us-east.iaas.cloud.ibm.com/v1/regions/us-east/zones/us-east-3"},"vpc":{"id":"r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::vpc:r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3","name":"b-vpc-washington-dc","resource_type":"vpc"},"status":"available","total_ipv4_address_count":256,"created_at":"2020-10-23T20:05:14Z","network_acl":{"id":"r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::network-acl:r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","href":"https://us-east.iaas.cloud.ibm.com/v1/network_acls/r014-082ad1d3-fce2-43e3-b7d3-dc2095967814","name":"moving-perfected-sprang-isolation"},"public_gateway":{"id":"r014-3de85aef-2106-4769-848c-4eadcfb176a0","crn":"crn:v1:bluemix:public:is:us-east-3:a/c56c9a268d23e1b339ac14774358133c::public-gateway:r014-3de85aef-2106-4769-848c-4eadcfb176a0","href":"https://us-east.iaas.cloud.ibm.com/v1/public_gateways/r014-3de85aef-2106-4769-848c-4eadcfb176a0","name":"pgw-108be660-156b-11eb-b5c7-eb70e3cf761d","resource_type":"public_gateway"},"resource_group":{"id":"345c433098294722ba52d9039133e8cf","href":"https://resource-controller.cloud.ibm.com/v2/resource_groups/345c433098294722ba52d9039133e8cf","name":"default"},"routing_table":{"id":"r014-05bca06d-0ada-4941-8cd6-d641610f628d","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-0fa2acc6-2a41-4f2b-9c89-bcea07cdcbc3/routing_tables/r014-05bca06d-0ada-4941-8cd6-d641610f628d","name":"refute-dotted-lethargic-snowbound-online-matron","resource_type":"routing_table"}},{"id":"0777-8da6464b-e4bf-4cd6-8e9f-09a9f0f619c5","crn":"crn:v1:bluemix:public:is:us-east-3:a/c56c9a268d23e1b339ac14774358133c::subnet:0777-8da6464b-e4bf-4cd6-8e9f-09a9f0f619c5","href":"https://us-east.iaas.cloud.ibm.com/v1/subnets/0777-8da6464b-e4bf-4cd6-8e9f-09a9f0f619c5","name":"cloudformsvpc","resource_type":"subnet","available_ipv4_address_count":247,"ipv4_cidr_block":"127.0.0.0/24","ip_version":"ipv4","zone":{"name":"us-east-3","href":"https://us-east.iaas.cloud.ibm.com/v1/regions/us-east/zones/us-east-3"},"vpc":{"id":"r014-7186c34c-67cc-4c07-aa40-326ecb895b53","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::vpc:r014-7186c34c-67cc-4c07-aa40-326ecb895b53","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-7186c34c-67cc-4c07-aa40-326ecb895b53","name":"cloudformvpx","resource_type":"vpc"},"status":"available","total_ipv4_address_count":256,"created_at":"2020-03-31T02:16:01Z","network_acl":{"id":"r014-3cb58cb2-6a61-4fea-a78f-55c39ba03ad3","crn":"crn:v1:bluemix:public:is:us-east:a/c56c9a268d23e1b339ac14774358133c::network-acl:r014-3cb58cb2-6a61-4fea-a78f-55c39ba03ad3","href":"https://us-east.iaas.cloud.ibm.com/v1/network_acls/r014-3cb58cb2-6a61-4fea-a78f-55c39ba03ad3","name":"napped-pessimist-thing-revolving-graduate-punctuate"},"public_gateway":{"id":"r014-1bdb4895-dd7d-4b15-a172-3d82c13428d4","crn":"crn:v1:bluemix:public:is:us-east-3:a/c56c9a268d23e1b339ac14774358133c::public-gateway:r014-1bdb4895-dd7d-4b15-a172-3d82c13428d4","href":"https://us-east.iaas.cloud.ibm.com/v1/public_gateways/r014-1bdb4895-dd7d-4b15-a172-3d82c13428d4","name":"pgw-91367280-72f5-11ea-9ebe-bbb9ec18e692","resource_type":"public_gateway"},"resource_group":{"id":"29b1dd25de2d40b5ae5bd5f719f30db8","href":"https://resource-controller.cloud.ibm.com/v2/resource_groups/29b1dd25de2d40b5ae5bd5f719f30db8","name":"camc-test"},"routing_table":{"id":"r014-a89ca341-dfd9-4b11-b2ee-0c7632b125da","href":"https://us-east.iaas.cloud.ibm.com/v1/vpcs/r014-7186c34c-67cc-4c07-aa40-326ecb895b53/routing_tables/r014-a89ca341-dfd9-4b11-b2ee-0c7632b125da","name":"playtime-untoasted-basin-dexterity-outlook-bundle","resource_type":"routing_table"}}]}

        '
    http_version:
  recorded_at: Wed, 21 Apr 2021 19:42:40 GMT
recorded_with: VCR 5.1.0
