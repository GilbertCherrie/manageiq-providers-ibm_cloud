---
http_interactions:
- request:
    method: post
    uri: https://iam.cloud.ibm.com/identity/token
    body:
      encoding: UTF-8
      string: grant_type=urn%3Aibm%3Aparams%3Aoauth%3Agrant-type%3Aapikey&apikey=IBM_CLOUD_VPC_API_KEY&response_type=cloud_iam
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
      Accept:
      - application/json
      Connection:
      - close
      User-Agent:
      - http.rb/4.1.1
  response:
    status:
      code: 200
      message: OK
    headers:
      Transaction-Id:
      - 9e10ef55777c42b3b7d982c03db59e5b
      Cache-Control:
      - no-cache, no-store
      Expires:
      - '0'
      Pragma:
      - no-cache
      Content-Type:
      - application/json
      Content-Language:
      - en-US
      Content-Length:
      - '1524'
      X-Envoy-Upstream-Service-Time:
      - '82'
      Server:
      - istio-envoy
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Date:
      - Mon, 15 Mar 2021 22:29:06 GMT
      Connection:
      - close
      Set-Cookie:
      - sessioncookie="5673b6dc010bc134"; Path=/; HttpOnly
    body:
      encoding: ASCII-8BIT
      string: '{"access_token":"eyJraWQiOiIyMDIxMDIxOTE4MzUiLCJhbGciOiJSUzI1NiJ9.eyJpYW1faWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwiaWQiOiJJQk1pZC0yNzAwMDFYTk5GIiwicmVhbG1pZCI6IklCTWlkIiwianRpIjoiNmFhZTQ1OWEtMjBhMi00MGNmLTg1MjMtYjg4ZjU1ZGM3MDIxIiwiaWRlbnRpZmllciI6IjI3MDAwMVhOTkYiLCJnaXZlbl9uYW1lIjoiSmFyZWQiLCJmYW1pbHlfbmFtZSI6Ik1vb3JlIiwibmFtZSI6IkphcmVkIE1vb3JlIiwiZW1haWwiOiJqYXJlZG1AY2EuaWJtLmNvbSIsInN1YiI6ImphcmVkbUBjYS5pYm0uY29tIiwiYXV0aG4iOnsic3ViIjoiamFyZWRtQGNhLmlibS5jb20iLCJpYW1faWQiOiJpYW0tMjcwMDAxWE5ORiIsIm5hbWUiOiJKYXJlZCBNb29yZSIsImdpdmVuX25hbWUiOiJKYXJlZCIsImZhbWlseV9uYW1lIjoiTW9vcmUiLCJlbWFpbCI6ImphcmVkbUBjYS5pYm0uY29tIn0sImFjY291bnQiOnsidmFsaWQiOnRydWUsImJzcyI6ImM1NmM5YTI2OGQyM2UxYjMzOWFjMTQ3NzQzNTgxMzNjIiwiaW1zX3VzZXJfaWQiOiI3MjI2NTkxIiwiZnJvemVuIjp0cnVlLCJpbXMiOiIxMTYwNDQ3In0sImlhdCI6MTYxNTg0NzM0MywiZXhwIjoxNjE1ODUwOTQzLCJpc3MiOiJodHRwczovL2lhbS5jbG91ZC5pYm0uY29tL2lkZW50aXR5IiwiZ3JhbnRfdHlwZSI6InVybjppYm06cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6YXBpa2V5Iiwic2NvcGUiOiJpYm0gb3BlbmlkIiwiY2xpZW50X2lkIjoiZGVmYXVsdCIsImFjciI6MSwiYW1yIjpbInB3ZCJdfQ.S1KIxpeeeV624yitK5T3l8QNmJvgBVOTJcWNvKaAV6x0_Nw42KH0_l-A0GVUDSj_hbzhGku-bYUiSyjFu7WyByUlWgkF2S3-AUClhdqMmGHEtvFG9aoNLCOib5CXmdDTTeFRb2trymayYmw8TQvRjP5Q7bDqC0gvz0MIyA0LkmhiS63S58CJrYZVSMZGrWmaH_6M6ag017yf1NnvgdxBv--1BBkPTLEJpGkn9BT6DlKd6y4-891SfR_4gp827FIeJ5MZrAXrLuJIt5qGWp9HYRrhBv3mAr-PMg9OcSGfPBeUcHgVHJn2W_UrzKvj99CCrXOY95fjI6pgzstLqFSgWw","refresh_token":"REFRESH_TOKEN","ims_user_id":"22222","token_type":"Bearer","expires_in":3600,"expiration":4102462800,"scope":"ibm
        openid"}'
    http_version:
  recorded_at: Mon, 15 Mar 2021 22:29:06 GMT
- request:
    method: get
    uri: https://us-east.iaas.cloud.ibm.com/v1/images?generation=2&limit=1&version=2021-01-01
    body:
      encoding: UTF-8
      string: ''
    headers:
      User-Agent:
      - ibm_vpc-ruby-sdk-0.1.0 x86_64-apple-darwin19.6.0 ruby-2.6.6
      X-Ibmcloud-Sdk-Analytics:
      - service_name=vpc;service_version=V1;operation_id=list_images
      Accept:
      - application/json
      Authorization: Bearer xxxxxx
      Connection:
      - close
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 15 Mar 2021 22:29:07 GMT
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '1200'
      Connection:
      - close
      Set-Cookie:
      - __cfduid=db307e4fff82d631d4e32bf95e44112e21615847346; expires=Wed, 14-Apr-21
        22:29:06 GMT; path=/; domain=.iaas.cloud.ibm.com; HttpOnly; SameSite=Lax;
        Secure
      Cf-Ray:
      - 63092dbe188eca98-YYZ
      Cache-Control:
      - max-age=0, no-cache, no-store, must-revalidate
      Expires:
      - "-1"
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Cf-Cache-Status:
      - DYNAMIC
      Cf-Request-Id:
      - '08d99aeacc0000ca9804038000000001'
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Pragma:
      - no-cache
      Transaction-Id:
      - 4ae39d784710e5fe2376868a827f52c3
      X-Content-Type-Options:
      - nosniff
      X-Request-Id:
      - 4ae39d784710e5fe2376868a827f52c3
      X-Xss-Protection:
      - 1; mode=block
      Server:
      - cloudflare
    body:
      encoding: UTF-8
      string: '{"first":{"href":"https://us-east.iaas.cloud.ibm.com/v1/images?limit=1"},"limit":1,"next":{"href":"https://us-east.iaas.cloud.ibm.com/v1/images?start=eyJDcmVhdGVkQXQiOiIyMDIwLTExLTA2VDE0OjUzOjI5WiIsIklEIjoicjAxNC00MTgyZjk0OC04NmQ5LTQ2MTQtYjM4Mi0zZGVjZWNkNzIzYzkifQ\u0026limit=1"},"images":[{"id":"r014-4182f948-86d9-4614-b382-3dececd723c9","crn":"crn:v1:bluemix:public:is:us-east:a/811f8abfbd32425597dc7ba40da98fa6::image:r014-4182f948-86d9-4614-b382-3dececd723c9","href":"https://us-east.iaas.cloud.ibm.com/v1/images/r014-4182f948-86d9-4614-b382-3dececd723c9","name":"ibm-debian-9-13-minimal-amd64-2","minimum_provisioned_size":100,"resource_group":{"id":"","href":"https://resource-controller.cloud.ibm.com/v1/resource_groups/"},"created_at":"2020-11-06T14:53:29Z","file":{"size":4},"operating_system":{"href":"https://us-east.iaas.cloud.ibm.com/v1/operating_systems/debian-9-amd64","name":"debian-9-amd64","architecture":"amd64","display_name":"Debian
        GNU/Linux 9.x Stretch/Stable - Minimal Install (amd64)","family":"Debian GNU/Linux","vendor":"Debian","version":"9.x
        Stretch/Stable - Minimal Install","dedicated_host_only":false},"status":"available","visibility":"public","encryption":"none"}]}'
    http_version:
  recorded_at: Mon, 15 Mar 2021 22:29:07 GMT
- request:
    method: get
    uri: https://us-east.iaas.cloud.ibm.com/v1/images?generation=2&limit=1&start=eyJDcmVhdGVkQXQiOiIyMDIwLTExLTA2VDE0OjUzOjI5WiIsIklEIjoicjAxNC00MTgyZjk0OC04NmQ5LTQ2MTQtYjM4Mi0zZGVjZWNkNzIzYzkifQ&version=2021-01-01
    body:
      encoding: UTF-8
      string: ''
    headers:
      User-Agent:
      - ibm_vpc-ruby-sdk-0.1.0 x86_64-apple-darwin19.6.0 ruby-2.6.6
      X-Ibmcloud-Sdk-Analytics:
      - service_name=vpc;service_version=V1;operation_id=list_images
      Accept:
      - application/json
      Authorization: Bearer xxxxxx
      Connection:
      - close
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 15 Mar 2021 22:29:07 GMT
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '1149'
      Connection:
      - close
      Set-Cookie:
      - __cfduid=dbf76a3c956de7a6dfaa162623447f2761615847347; expires=Wed, 14-Apr-21
        22:29:07 GMT; path=/; domain=.iaas.cloud.ibm.com; HttpOnly; SameSite=Lax;
        Secure
      Cf-Ray:
      - 63092dc1dd35f999-YYZ
      Cache-Control:
      - max-age=0, no-cache, no-store, must-revalidate
      Expires:
      - "-1"
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Cf-Cache-Status:
      - DYNAMIC
      Cf-Request-Id:
      - '08d99aed270000f999253cf000000001'
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Pragma:
      - no-cache
      Transaction-Id:
      - e2ca556c8b0bd7de318736fcf3de47b2
      X-Content-Type-Options:
      - nosniff
      X-Request-Id:
      - e2ca556c8b0bd7de318736fcf3de47b2
      X-Xss-Protection:
      - 1; mode=block
      Server:
      - cloudflare
    body:
      encoding: UTF-8
      string: '{"first":{"href":"https://us-east.iaas.cloud.ibm.com/v1/images?limit=1"},"limit":1,"next":{"href":"https://us-east.iaas.cloud.ibm.com/v1/images?start=eyJDcmVhdGVkQXQiOiIyMDIwLTExLTA2VDE0OjQwOjE5WiIsIklEIjoicjAxNC01MWE1YWFmNS1kZTM0LTQxYWItYWNhOC01OTIxZWIwZDBiYzMifQ\u0026limit=1"},"images":[{"id":"r014-51a5aaf5-de34-41ab-aca8-5921eb0d0bc3","crn":"crn:v1:bluemix:public:is:us-east:a/811f8abfbd32425597dc7ba40da98fa6::image:r014-51a5aaf5-de34-41ab-aca8-5921eb0d0bc3","href":"https://us-east.iaas.cloud.ibm.com/v1/images/r014-51a5aaf5-de34-41ab-aca8-5921eb0d0bc3","name":"ibm-centos-8-2-minimal-amd64-2","minimum_provisioned_size":100,"resource_group":{"id":"","href":"https://resource-controller.cloud.ibm.com/v1/resource_groups/"},"created_at":"2020-11-06T14:40:19Z","file":{"size":3},"operating_system":{"href":"https://us-east.iaas.cloud.ibm.com/v1/operating_systems/centos-8-amd64","name":"centos-8-amd64","architecture":"amd64","display_name":"CentOS
        8.x - Minimal Install (amd64)","family":"CentOS","vendor":"CentOS","version":"8.x
        - Minimal Install","dedicated_host_only":false},"status":"available","visibility":"public","encryption":"none"}]}'
    http_version:
  recorded_at: Mon, 15 Mar 2021 22:29:07 GMT
recorded_with: VCR 5.1.0
